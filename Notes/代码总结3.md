[access code summary]

```java
1.public static <T> Optional<T> ofNullable(T value)
    Returns an Optional describing the specified value, if non-null, otherwise returns an empty Optional.
       如果非空，返回描述指定值的Optional，除此之外返回空值。
例子：
        Optional<HoldResultOutput> holdResultOutput = Optional.ofNullable(queryPrices(bufferedCabin, singleCabin));

2.解决10月46h
 @JsonFormat(shape = JsonFormat.Shape.STRING, lenient = OptBoolean.FALSE, pattern = "yyyy-MM-dd")
    
3.UUID.randomUUID().toString()
```

4.单元测试---能导入

```java
@Slf4j
@SpringBootTest(classes = {ServletInitializer.class})
@RunWith(SpringRunner.class)
public class LossAnotherTest {
    @Autowired
    private LossServiceImpl lossService;
    
    @Test
    public void b(){
    
     Assert.assertEquals(except,actual);//判断目标期待值和实际的值是不是一致
    }
    
    @Test(expected = InServiceException.class ) //报这个异常InServiceException会执行通过，显示成功（绿色对勾）
    public void b(){
    
    }


```

5.包结构

```java

```

![1572315305793](C:\Users\kangzhe\AppData\Roaming\Typora\typora-user-images\1572315305793.png)

6.转json字符串

```java
JSONObject.toJSONString(object)
```

7.时间格式转换

```java


```

```java
/**
     * 中文格式的月份和日期，如: "11月7日"
     *
     * @param d {@link java.util.Date} 对象
     * @return 中文格式的月份和日期
     */
    public static String getZhMonthAndDate(Date d) {
        Calendar cal = Calendar.getInstance();
        cal.setTime(d);
        int month = cal.get(Calendar.MONTH) + 1;
        int date = cal.get(Calendar.DATE);
        return String.format("%d月%d日", month, date);
    }
```

```java
public static Date dateParseString(String s) throws ParseException {
        SimpleDateFormat simpleDateFormat =new SimpleDateFormat("yyyy-MM-dd");
        return  simpleDateFormat.parse(s);
    }
```

```java

        for (LossApplyResource e : loss.getParams().getResources()) {
            if (e.getDepartDates() != null) {

                for (LossApplyDepartDate each : e.getDepartDates()) {
                    //航行日期还没有过期的才能核损
                    long date;
                    try {
                        date = DateUtil.dateParseString(each.getDepartDate()).getTime();
                    } catch (ParseException exp) {
                        throw new InServiceException("确管核损入参：航行日期格式不对", InErrorEnum.OPEN_CFM_LOSS_PARAM_ERROR.getCode());
                    }
                    if (date <= System.currentTimeMillis()) {
                        throw new InServiceException("航行日期已经过期不能进行核损", InErrorEnum.OPEN_CFM_LOSS_PARAM_ERROR.getCode());
                    }
                }
            }
        }
```

8.对象转json字符串
```java
 String s = JSONObject.toJSONString(cancelConfirm)
```

9.Unable to open debugger port (127.0.0.1:60672): java.net.SocketException "Interrupted function call: 

IDEA启动时Tomcat端口被占用。#[ https://my.oschina.net/u/4057396/blog/3021245 ]

```java
解决方案一：在tomcat参数配置中更换端口
比如之前的：
    http port:8080
    JAX port: 1099
换一个与之前不同的，不常用的端口。

解决方案二：结束占用该端口的进程

cmd打开命令行窗口

netstat -aon|findstr “1099”   查询占用1099端口的进程，最后有端口的名字

taskkill -f -pid 808    关闭pid为端口的名字的进程
```

10.回滚

```java
@Transactional(rollbackFor = Exception.class)
```

11.时间戳yyyy-mm-dd格式

```java
 long time = System.currentTimeMillis();
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");//要转换的时间格式
 String timeString = sdf.format(time);
       
```

